<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Graceful Shutdown - matheusfm</title><meta name=Description content><meta property="og:title" content="Graceful Shutdown"><meta property="og:description" content="TL;DR:
This article discusses the importance of Graceful Shutdown in microservices,
the shutdown signals (SIGTERM, SIGINT and SIGKILL)
and three perspectives on this challenge: Go, Kubernetes, and Istio."><meta property="og:type" content="article"><meta property="og:url" content="https://matheusfm.dev/en/graceful-shutdown/"><meta property="og:image" content="https://matheusfm.dev/en/graceful-shutdown/featured-image.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-01T01:50:14-03:00"><meta property="article:modified_time" content="2021-09-01T01:50:14-03:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://matheusfm.dev/en/graceful-shutdown/featured-image.jpg"><meta name=twitter:title content="Graceful Shutdown"><meta name=twitter:description content="TL;DR:
This article discusses the importance of Graceful Shutdown in microservices,
the shutdown signals (SIGTERM, SIGINT and SIGKILL)
and three perspectives on this challenge: Go, Kubernetes, and Istio."><meta name=application-name content="matheusfm"><meta name=apple-mobile-web-app-title content="matheusfm"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://matheusfm.dev/en/graceful-shutdown/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Graceful Shutdown","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/matheusfm.dev\/en\/graceful-shutdown\/"},"image":[{"@type":"ImageObject","url":"https:\/\/matheusfm.dev\/en\/graceful-shutdown\/featured-image.jpg","width":3507,"height":1749}],"genre":"posts","keywords":"Go, Kubernetes, Istio","wordcount":987,"url":"https:\/\/matheusfm.dev\/en\/graceful-shutdown\/","datePublished":"2021-09-01T01:50:14-03:00","dateModified":"2021-09-01T01:50:14-03:00","publisher":{"@type":"Organization","name":"Matheus"},"author":{"@type":"Person","name":"Matheus"},"description":""}</script></head><body header-desktop header-mobile><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/en/ title=matheusfm><span class=header-title-pre><i class='fa fa-terminal fa-fw'></i> </span><span id=id-1 class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/en/posts/><i class='fa fa-book fa-fw'></i> Posts </a><a class=menu-item href=/en/tags/><i class='fa fa-tags fa-fw'></i> Tags </a><a class=menu-item href=/en/about/><i class='fa fa-user fa-fw'></i> About </a><a class=menu-item href=https://github.com/matheusfm title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i> </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item language" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/graceful-shutdown/>Português</option><option value=/en/graceful-shutdown/ selected>English</option></select>
</a><span class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/en/ title=matheusfm><span class=header-title-pre><i class='fa fa-terminal fa-fw'></i> </span><span id=id-2 class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/en/posts/ title><i class='fa fa-book fa-fw'></i>Posts</a><a class=menu-item href=/en/tags/ title><i class='fa fa-tags fa-fw'></i>Tags</a><a class=menu-item href=/en/about/ title><i class='fa fa-user fa-fw'></i>About</a><a class=menu-item href=https://github.com/matheusfm title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a><a href=javascript:void(0); class=menu-item title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select onchange="location=this.value"><option value=/graceful-shutdown/>Português</option><option value=/en/graceful-shutdown/ selected>English</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Graceful Shutdown</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://matheusfm.dev title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>Matheus</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-09-01>2021-09-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;987 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;5 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/en/graceful-shutdown/featured-image.jpg data-srcset="/en/graceful-shutdown/featured-image.jpg, /en/graceful-shutdown/featured-image.jpg 1.5x, /en/graceful-shutdown/featured-image.jpg 2x" data-sizes=auto alt=/en/graceful-shutdown/featured-image.jpg title=/en/graceful-shutdown/featured-image.jpg></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#understanding-the-signals>Understanding the signals</a></li><li><a href=#graceful-shutdown>Graceful shutdown</a></li><li><a href=#go>Go</a></li><li><a href=#kubernetes>Kubernetes</a></li><li><a href=#istio>Istio</a></li><li><a href=#conclusion>Conclusion</a></li><li><a href=#references>References</a></li></ul></nav></div></div><div class=content id=content><p><strong>TL;DR:</strong>
This article discusses the importance of Graceful Shutdown in microservices,
the shutdown signals (<code>SIGTERM</code>, <code>SIGINT</code> and <code>SIGKILL</code>)
and three perspectives on this challenge: Go, Kubernetes, and Istio.</p><h2 id=introduction>Introduction</h2><p>Horizontal scalability is one of the key advantages of modern software architectures
to ensure systems remain responsive under varying loads.</p><p>In other words, replicas of microservices are scaled up when the load increases and scaled down when the load decreases.</p><p>For this elasticity (increase and decrease of replicas) to be seamless and transparent,
it is important for the initialization time of microservices to be low.
The faster a service initializes, the quicker it becomes available to handle requests and share the load with other replicas.</p><div class="details admonition question open"><div class="details-summary admonition-title"><i class="icon fas fa-question-circle fa-fw"></i>Question<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><p>What about the shutdown of microservices?</p><p>What happens if a replica receives a shutdown signal while it&rsquo;s processing requests?</p></div></div></div><p>Some situations where a replica may receive a shutdown signal include:</p><ol><li>load decrease</li><li>rolling update</li><li>rolling restart</li></ol><p>Normally, upon receiving a signal, the processing of these requests would be interrupted, and clients would receive errors.</p><p>Unless the service has a smarter shutdown process: <strong>graceful shutdown</strong>.</p><h2 id=understanding-the-signals>Understanding the signals</h2><p>Signals are primarily used in Unix-like systems and are sent by the kernel or some other program.</p><p>The main shutdown/termination signals for a program are <code>SIGTERM</code>, <code>SIGINT</code> and <code>SIGKILL</code>.</p><p><code>SIGTERM</code> is a generic signal used to cause program termination.
It is the signal generated by the <code>kill</code> command.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw"></i>Info<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>Kubernetes sends the <code>SIGTERM</code> signal to kill a Pod.</div></div></div><p>The <code>SIGINT</code> signal is sent when the user types <code>CTRL-c</code>.</p><p><code>SIGKILL</code> is used to immediately terminate a program.
It cannot be intercepted or ignored and is thus always fatal.</p><h2 id=graceful-shutdown>Graceful shutdown</h2><p>Graceful shutdown refers to a controlled and seamless termination process that avoids system harm.</p><p>To enable graceful shutdown, microservices should effectively handle the <code>SIGTERM</code> and <code>SIGINT</code> signals mentioned above.</p><p>The default behavior of most technologies is to abruptly stop program processing, which often negatively impacts functionality.</p><p>For example, in Go, a synchronous signal is converted into a runtime <code>panic</code>.</p><p>A simple way to handle these signals is to wait a few seconds for processing to complete.
However, it may be necessary to close connections to databases, <a href=https://redis.io/ target=_blank rel="noopener noreffer">Redis</a>, or a message broker, for example.</p><p>Graceful shutdown can be implemented directly in the service&rsquo;s code.
However, <a href=https://kubernetes.io/ target=_blank rel="noopener noreffer">Kubernetes</a> and <a href=https://istio.io/ target=_blank rel="noopener noreffer">Istio</a> have configurations that can help in this task.</p><h2 id=go>Go</h2><p>The most common implementation of graceful shutdown in Go is using <a href=https://gobyexample.com/goroutines target=_blank rel="noopener noreffer">Goroutines</a>
and <a href=https://gobyexample.com/channels target=_blank rel="noopener noreffer">Channels</a>, as shown in the example below.</p><script type=application/javascript src="https://gist.github.com/matheusfm/3e66745244ae7c0c888e51c3eacc59a2.js?file=stdlib.go"></script><p>In this example, the HTTP server is initialized in a new Goroutine while the main Goroutine waits for a signal on the <code>quit</code> channel.</p><p>Once a signal is received, the server is shut down with a timeout of 5 seconds.
If there are still active connections after 5 seconds, the <code>Shutdown()</code> function returns an error.</p><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw"></i>Note<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>The <code>Shutdown()</code> function was introduced in <a href=https://golang.org/doc/go1.8#http_shutdown target=_blank rel="noopener noreffer">Go1.8</a></div></div></div><p>The main web frameworks in Go suggest implementations following this pattern with Goroutines and Channels:</p><ul><li><a href=https://github.com/gin-gonic/gin#graceful-shutdown-or-restart target=_blank rel="noopener noreffer">Gin</a></li><li><a href=https://github.com/gorilla/mux#graceful-shutdown target=_blank rel="noopener noreffer">gorilla/mux</a></li><li><a href=https://echo.labstack.com/cookbook/graceful-shutdown/ target=_blank rel="noopener noreffer">echo</a></li></ul><p>For those who prefer to use third-party libraries specifically created for this purpose,
I would recommend <a href=https://github.com/ory/graceful target=_blank rel="noopener noreffer">ory/graceful</a>.</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw"></i>Tip<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>An adaptation of the above example using the <a href=https://github.com/ory/graceful target=_blank rel="noopener noreffer">ory/graceful</a> library
is available on my <a href=https://github.com/matheusfm/go-graceful/blob/master/ory.go target=_blank rel="noopener noreffer">GitHub</a>.</div></div></div><h2 id=kubernetes>Kubernetes</h2><p>In Kubernetes <a href=https://kubernetes.io/docs/concepts/workloads/pods/ target=_blank rel="noopener noreffer">Pods</a>,
it is possible to configure a hook called <code>preStop</code>, which is invoked before the <code>SIGTERM</code> signal is sent.</p><p>By setting a <code>sleep</code> command in this hook, we can achieve graceful shutdown, as shown in the example below.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>lifecycle</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>preStop</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;sleep&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;15&#34;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>The <code>sleep</code> interval should be sufficient for the Kubernetes endpoint change to propagate to kube-proxy,
Ingress Controller, CoreDNS, etc. For more details, refer to <a href=https://learnk8s.io/graceful-shutdown target=_blank rel="noopener noreffer">this article</a>.</p><p>By default, Kubernetes waits for up to 30 seconds during the Pod shutdown process
before forcefully terminating the process (<code>SIGKILL</code>, which cannot be intercepted).</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw"></i>Tip<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>I strongly recommend reading <a href=https://learnk8s.io/graceful-shutdown target=_blank rel="noopener noreffer">this article</a>
for more details on Graceful Shutdown in Kubernetes.</div></div></div><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fw"></i>Warning<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>The main disadvantage of this approach is that the Docker image needs to have the <code>sleep</code> command,
making it difficult to use <a href=https://github.com/GoogleContainerTools/distroless target=_blank rel="noopener noreffer">Distroless</a> images.</div></div></div><h2 id=istio>Istio</h2><p>Istio has the configuration <code>TerminationDrainDuration</code>, which allows defining a pause before shutting down the sidecar.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw"></i>Info<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><p>Sidecar is a common concept in Service Mesh implementations.
It is a container that accompanies the application (which is also a container) within the Kubernetes Pod.
Thus, we have 2 containers inside the Pod: <code>app + sidecar</code>.</p><p>The sidecar is a proxy (in the case of Istio, it is <a href=https://www.envoyproxy.io/ target=_blank rel="noopener noreffer">Envoy</a>) that intermediates all Pod traffic,
providing all the advantages of the Service Mesh.</p></div></div></div><p>When the proxy receives <code>SIGTERM</code> or <code>SIGINT</code>, it starts draining connections, preventing new connections and allowing existing connections to complete.</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw"></i>Tip<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>Remember that <code>SIGTERM</code> is sent after the execution of the <code>preStop</code> hook.</div></div></div><p>The duration of this draining process is configurable both <a href=https://istio.io/v1.11/docs/reference/config/istio.mesh.v1alpha1/#ProxyConfig target=_blank rel="noopener noreffer">globally</a>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>install.istio.io/v1alpha1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>IstioOperator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>meshConfig</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>defaultConfig</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>terminationDrainDuration</span><span class=p>:</span><span class=w> </span><span class=l>50s</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>and per workload:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>proxy.istio.io/config</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{ &#34;terminationDrainDuration&#34;: 50s }&#39;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>The default duration is 5 seconds.</p><h2 id=conclusion>Conclusion</h2><p>The best approach to enable Graceful Shutdown depends on the scenario of each project/system.</p><p>There are projects where:</p><ul><li>modifying the microservices&rsquo; code is very laborious;</li><li>Service Mesh is not used;</li><li>the use of Distroless images is a priority;</li><li>they are not running on Kubernetes;</li><li>they are running on Kubernetes, using Istio, and have the agility to modify the microservices&rsquo; code.
In this case, it is possible to combine multiple strategies to ensure zero downtime.</li></ul><div class="details admonition question open"><div class="details-summary admonition-title"><i class="icon fas fa-question-circle fa-fw"></i>Question<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><p>Share in the comments the challenges and lessons learned from your project! 😉</p><ul><li>What is the scenario of your project?</li><li>What approach is used for graceful shutdown?</li><li>How is the implementation in your preferred programming language and framework?</li></ul></div></div></div><h2 id=references>References</h2><ol><li><a href=https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html target=_blank rel="noopener noreffer">Termination Signals</a></li><li><a href=https://learnk8s.io/graceful-shutdown target=_blank rel="noopener noreffer">Graceful shutdown and zero downtime deployments in Kubernetes</a></li><li><a href=https://pkg.go.dev/os/signal target=_blank rel="noopener noreffer">signal package</a></li><li><a href=https://www.solo.io/blog/challenges-of-running-istio-distroless-images/ target=_blank rel="noopener noreffer">Challenges of running Istio distroless images</a></li><li><a href=https://medium.com/honestbee-tw-engineer/gracefully-shutdown-in-go-http-server-5f5e6b83da5a target=_blank rel="noopener noreffer">Graceful shutdown in Go http server</a></li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2021-09-01</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://matheusfm.dev/en/graceful-shutdown/ data-title="Graceful Shutdown" data-via=mfariam data-hashtags=Go,Kubernetes,Istio><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://matheusfm.dev/en/graceful-shutdown/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://matheusfm.dev/en/graceful-shutdown/ data-title="Graceful Shutdown" data-web><i class="fab fa-whatsapp fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/en/tags/go/>Go</a>,&nbsp;<a href=/en/tags/kubernetes/>Kubernetes</a>,&nbsp;<a href=/en/tags/istio/>Istio</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/en/>Home</a></span></section></div><div class=post-nav></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://matheusfm.dev target=_blank>Matheus</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.pt.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"comment",lightTheme:"github-light",repo:"matheusfm/matheusfm.github.io"}},data:{"id-1":"matheusfm.dev","id-2":"matheusfm.dev"},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},search:{highlightTag:null,lunrIndexURL:"/en/index.json",lunrLanguageCode:"en",maxResultLength:null,noResultsFound:"No results found",snippetLength:null,type:"lunr"},typeit:{cursorChar:"|",cursorSpeed:null,data:{"id-1":["id-1"],"id-2":["id-2"]},duration:-1,speed:null}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-174922167-1",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-174922167-1" async></script></body></html>